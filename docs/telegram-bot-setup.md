# ü§ñ Telegram Bot –∑–∞ –†–æ–¥–æ–ø–∏ –î–µ–Ω—Ç

## –°—Ç—ä–ø–∫–∞ 1: –°—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ –±–æ—Ç

1. **–û—Ç–≤–æ—Ä–∏ Telegram** –∏ –ø–æ—Ç—ä—Ä—Å–∏ `@BotFather`
2. –ò–∑–ø—Ä–∞—Ç–∏ –∫–æ–º–∞–Ω–¥–∞: `/newbot`
3. –í—ä–≤–µ–¥–∏ –∏–º–µ: `–†–æ–¥–æ–ø–∏ –î–µ–Ω—Ç`
4. –í—ä–≤–µ–¥–∏ username: `RodopiDentBot` (–∏–ª–∏ –¥—Ä—É–≥ —Å–≤–æ–±–æ–¥–µ–Ω)
5. **–ó–∞–ø–∏—à–∏ BOT TOKEN** - —â–µ –∏–∑–≥–ª–µ–∂–¥–∞ —Ç–∞–∫–∞: `1234567890:ABCdefGhIjKlmNoPqRsTuVwXyZ`

## –°—Ç—ä–ø–∫–∞ 2: –ù–∞–º–µ—Ä–∏ Chat ID –Ω–∞ –¥–æ–∫—Ç–æ—Ä–∫–∞—Ç–∞

1. –î–æ–∫—Ç–æ—Ä–∫–∞—Ç–∞ —Ç—Ä—è–±–≤–∞ –¥–∞ –Ω–∞–ø–∏—à–µ –Ω–µ—â–æ –Ω–∞ –±–æ—Ç–∞ (–Ω–∞–ø—Ä. `/start`)
2. –û—Ç–≤–æ—Ä–∏ –≤ –±—Ä–∞—É–∑—ä—Ä:
   ```
   https://api.telegram.org/bot<BOT_TOKEN>/getUpdates
   ```
3. –ù–∞–º–µ—Ä–∏ `"chat":{"id":123456789}` - —Ç–æ–≤–∞ –µ CHAT_ID

## –°—Ç—ä–ø–∫–∞ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ n8n

1. **Settings ‚Üí Credentials ‚Üí Add Credential**
2. –ò–∑–±–µ—Ä–∏ **Telegram API**
3. –í—ä–≤–µ–¥–∏:
   - **Access Token**: BOT_TOKEN –æ—Ç —Å—Ç—ä–ø–∫–∞ 1

## –°—Ç—ä–ø–∫–∞ 4: –ò–º–ø–æ—Ä—Ç–∏—Ä–∞–π workflows

–ò–º–ø–æ—Ä—Ç–∏—Ä–∞–π —Å–ª–µ–¥–Ω–∏—Ç–µ —Ñ–∞–π–ª–æ–≤–µ –≤ n8n:
- `09-telegram-notify-booking.json` - –ò–∑–ø—Ä–∞—â–∞ –Ω–æ—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø—Ä–∏ –Ω–æ–≤–∞ —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏—è
- `10-telegram-callback.json` - –û–±—Ä–∞–±–æ—Ç–≤–∞ –æ—Ç–≥–æ–≤–æ—Ä–∏—Ç–µ –æ—Ç –±—É—Ç–æ–Ω–∏—Ç–µ

## –°—Ç—ä–ø–∫–∞ 5: –ù–∞—Å—Ç—Ä–æ–π CHAT_ID

–í `09-telegram-notify-booking.json` –∏ `10-telegram-callback.json`:
- –ù–∞–º–µ—Ä–∏ –Ω–æ—É–¥–æ–≤–µ—Ç–µ "Send Telegram" 
- –°–º–µ–Ω–∏ `DOCTOR_CHAT_ID` —Å —Ä–µ–∞–ª–Ω–æ—Ç–æ Chat ID

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏ –¥–µ—Ç–∞–π–ª–∏

### Workflow: Notify Booking
```
–ù–æ–≤–∞ —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏—è (booking-webhook)
    ‚Üì
–ò–∑–ø—Ä–∞—Ç–∏ Telegram —Å—ä–æ–±—â–µ–Ω–∏–µ —Å inline –±—É—Ç–æ–Ω–∏:
    [30 –º–∏–Ω] [45 –º–∏–Ω] [60 –º–∏–Ω] [90 –º–∏–Ω]
    [‚ùå –û—Ç–∫–∞–∂–∏] [üìÖ –ü—Ä–µ–¥–ª–æ–∂–∏ –¥—Ä—É–≥ —á–∞—Å]
```

### Workflow: Callback Handler
```
–î–æ–∫—Ç–æ—Ä–∫–∞—Ç–∞ –Ω–∞—Ç–∏—Å–∫–∞ –±—É—Ç–æ–Ω
    ‚Üì
n8n –ø–æ–ª—É—á–∞–≤–∞ callback
    ‚Üì
–ê–∫–æ –µ –ø—Ä–æ–¥—ä–ª–∂–∏—Ç–µ–ª–Ω–æ—Å—Ç:
    ‚Üí –û–±–Ω–æ–≤–∏ —Å—Ç–∞—Ç—É—Å –Ω–∞ "confirmed"
    ‚Üí –û–±–Ω–æ–≤–∏ –ø—Ä–æ–¥—ä–ª–∂–∏—Ç–µ–ª–Ω–æ—Å—Ç
    ‚Üí –ò–∑–ø—Ä–∞—Ç–∏ SMS –Ω–∞ –ø–∞—Ü–∏–µ–Ω—Ç–∞
    ‚Üì
–ê–∫–æ –µ –æ—Ç–∫–∞–∑:
    ‚Üí –û–±–Ω–æ–≤–∏ —Å—Ç–∞—Ç—É—Å –Ω–∞ "cancelled"
    ‚Üí –ò–∑–ø—Ä–∞—Ç–∏ SMS –Ω–∞ –ø–∞—Ü–∏–µ–Ω—Ç–∞
```

---

## üì± –ü—Ä–∏–º–µ—Ä–Ω–æ —Å—ä–æ–±—â–µ–Ω–∏–µ

```
ü¶∑ –ù–æ–≤–∞ —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏—è!

üë§ –ò–º–µ: –ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤
üìû –¢–µ–ª: 0888123456
üìÖ –î–∞—Ç–∞: 27.01.2026
üïê –ß–∞—Å: 10:00
üìù –ü—Ä–∏—á–∏–Ω–∞: –ü—Ä–µ–≥–ª–µ–¥

–ò–∑–±–µ—Ä–µ—Ç–µ –ø—Ä–æ–¥—ä–ª–∂–∏—Ç–µ–ª–Ω–æ—Å—Ç:
[30 –º–∏–Ω] [45 –º–∏–Ω] [60 –º–∏–Ω] [90 –º–∏–Ω]

[‚ùå –û—Ç–∫–∞–∂–∏]
```

---

## ‚öôÔ∏è –ë—É—Ç–æ–Ω–∏ –∏ Callbacks

| –ë—É—Ç–æ–Ω | Callback Data | –î–µ–π—Å—Ç–≤–∏–µ |
|-------|---------------|----------|
| 30 –º–∏–Ω | `confirm_30_{apt_id}` | –ü–æ—Ç–≤—ä—Ä–¥–∏ —Å 30 –º–∏–Ω |
| 45 –º–∏–Ω | `confirm_45_{apt_id}` | –ü–æ—Ç–≤—ä—Ä–¥–∏ —Å 45 –º–∏–Ω |
| 60 –º–∏–Ω | `confirm_60_{apt_id}` | –ü–æ—Ç–≤—ä—Ä–¥–∏ —Å 60 –º–∏–Ω |
| 90 –º–∏–Ω | `confirm_90_{apt_id}` | –ü–æ—Ç–≤—ä—Ä–¥–∏ —Å 90 –º–∏–Ω |
| ‚ùå –û—Ç–∫–∞–∂–∏ | `cancel_{apt_id}` | –û—Ç–∫–∞–∂–∏ —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏—è—Ç–∞ |

---

## üîí –°–∏–≥—É—Ä–Ω–æ—Å—Ç

- –°–∞–º–æ –¥–æ–∫—Ç–æ—Ä–∫–∞—Ç–∞ –ø–æ–ª—É—á–∞–≤–∞ —Å—ä–æ–±—â–µ–Ω–∏—è (—Ñ–∏–∫—Å–∏—Ä–∞–Ω CHAT_ID)
- Callback handler –ø—Ä–æ–≤–µ—Ä—è–≤–∞ –¥–∞–ª–∏ callback-–∞ –∏–¥–≤–∞ –æ—Ç –ø—Ä–∞–≤–∏–ª–Ω–∏—è —á–∞—Ç
- –í—Å–∏—á–∫–∏ –ø—Ä–æ–º–µ–Ω–∏ —Å–µ –ª–æ–≥–≤–∞—Ç –≤ Google Sheets
