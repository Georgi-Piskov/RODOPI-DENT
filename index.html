<!DOCTYPE html>
<html lang="bg">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <meta name="description" content="–†–æ–¥–æ–ø–∏ –î–µ–Ω—Ç - –ó—ä–±–æ–ª–µ–∫–∞—Ä—Å–∫–∞ –ø—Ä–∞–∫—Ç–∏–∫–∞. –ó–∞–ø–∞–∑–µ—Ç–µ —á–∞—Å –æ–Ω–ª–∞–π–Ω –±—ä—Ä–∑–æ –∏ –ª–µ—Å–Ω–æ.">
  <meta name="theme-color" content="#2563eb">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="–†–æ–¥–æ–ø–∏ –î–µ–Ω—Ç">
  
  <title>–†–æ–¥–æ–ø–∏ –î–µ–Ω—Ç</title>
  
  <!-- PWA Manifest -->
  <link rel="manifest" href="manifest.json">
  
  <!-- Favicon -->
  <link rel="icon" type="image/png" sizes="32x32" href="assets/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="assets/icons/favicon-16x16.png">
  <link rel="apple-touch-icon" href="assets/icons/icon-192x192.png">
  
  <!-- Preconnect for performance -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  
  <!-- Google Fonts - Inter for modern look -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- Styles -->
  <link rel="stylesheet" href="css/main.css">
</head>
<body>
  <!-- App Shell -->
  <div id="app" class="app">
    
    <!-- Header - changes based on route -->
    <header id="app-header" class="header">
      <div class="header__container">
        <a href="#/" class="header__logo">
          <img src="assets/logo.png" alt="–†–æ–¥–æ–ø–∏ –î–µ–Ω—Ç" class="header__logo-img" onerror="this.style.display='none'">
          <span class="header__logo-text">–†–æ–¥–æ–ø–∏ –î–µ–Ω—Ç</span>
        </a>
        <nav id="header-nav" class="header__nav">
          <!-- Navigation items injected by JS based on auth state -->
        </nav>
        <button id="menu-toggle" class="header__menu-toggle" aria-label="–ú–µ–Ω—é">
          <span></span>
          <span></span>
          <span></span>
        </button>
      </div>
    </header>

    <!-- Mobile Navigation Drawer -->
    <div id="mobile-nav" class="mobile-nav">
      <div class="mobile-nav__backdrop"></div>
      <div class="mobile-nav__drawer">
        <div class="mobile-nav__header">
          <span class="mobile-nav__title">–ú–µ–Ω—é</span>
          <button id="mobile-nav-close" class="mobile-nav__close" aria-label="–ó–∞—Ç–≤–æ—Ä–∏">√ó</button>
        </div>
        <nav id="mobile-nav-links" class="mobile-nav__links">
          <!-- Links injected by JS -->
        </nav>
      </div>
    </div>

    <!-- Main Content Area -->
    <main id="app-content" class="main">
      <!-- Page content loaded dynamically -->
      <div class="loading">
        <div class="loading__spinner"></div>
        <p class="loading__text">–ó–∞—Ä–µ–∂–¥–∞–Ω–µ...</p>
      </div>
    </main>

    <!-- Toast Notifications Container -->
    <div id="toast-container" class="toast-container"></div>

    <!-- Offline Indicator -->
    <div id="offline-indicator" class="offline-indicator" hidden>
      <span class="offline-indicator__icon">üì°</span>
      <span class="offline-indicator__text">–û—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º</span>
    </div>

    <!-- PWA Install Prompt (Admin only) -->
    <div id="pwa-install-prompt" class="pwa-install" hidden>
      <div class="pwa-install__content">
        <span class="pwa-install__icon">üì≤</span>
        <div class="pwa-install__text">
          <strong>–ò–Ω—Å—Ç–∞–ª–∏—Ä–∞–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ—Ç–æ</strong>
          <small>–ó–∞ –±—ä—Ä–∑ –¥–æ—Å—Ç—ä–ø –æ—Ç –Ω–∞—á–∞–ª–Ω–∏—è –µ–∫—Ä–∞–Ω</small>
        </div>
        <button id="pwa-install-btn" class="btn btn--primary btn--sm">–ò–Ω—Å—Ç–∞–ª–∏—Ä–∞–π</button>
        <button id="pwa-install-dismiss" class="pwa-install__dismiss" aria-label="–ó–∞—Ç–≤–æ—Ä–∏">√ó</button>
      </div>
    </div>

  </div>

  <!-- Page Templates (hidden, used by router) -->
  
  <!-- Home/Booking Page Template -->
  <template id="template-home">
    <div class="page page--home">
      <section class="hero">
        <div class="hero__content">
          <h1 class="hero__title">–î–æ–±—Ä–µ –¥–æ—à–ª–∏ –≤<br><strong>–†–æ–¥–æ–ø–∏ –î–µ–Ω—Ç</strong></h1>
          <p class="hero__subtitle">–í–∞—à–∞—Ç–∞ —É—Å–º–∏–≤–∫–∞ –µ –Ω–∞—à–∞—Ç–∞ –≥—Ä–∏–∂–∞</p>
          <a href="#/booking" class="btn btn--primary btn--lg hero__cta">
            <span class="btn__icon">üìÖ</span>
            –ó–∞–ø–∞–∑–∏ —á–∞—Å
          </a>
        </div>
      </section>
      
      <section class="info-section">
        <h2 class="section-title">–†–∞–±–æ—Ç–Ω–æ –≤—Ä–µ–º–µ</h2>
        <div class="work-hours">
          <div class="work-hours__row">
            <span class="work-hours__days">–ü–æ–Ω–µ–¥–µ–ª–Ω–∏–∫ - –ü–µ—Ç—ä–∫</span>
            <span class="work-hours__time">09:00 - 12:00, 13:30 - 17:00</span>
          </div>
          <div class="work-hours__row work-hours__row--closed">
            <span class="work-hours__days">–°—ä–±–æ—Ç–∞ - –ù–µ–¥–µ–ª—è</span>
            <span class="work-hours__time">–ü–æ—á–∏–≤–Ω–∏ –¥–Ω–∏</span>
          </div>
        </div>
      </section>

      <section class="info-section">
        <h2 class="section-title">–ö–æ–Ω—Ç–∞–∫—Ç–∏</h2>
        <div class="contact-info">
          <a href="tel:+359000000000" class="contact-info__item">
            <span class="contact-info__icon">üìû</span>
            <span class="contact-info__text" id="clinic-phone">+359 00 000 0000</span>
          </a>
          <div class="contact-info__item">
            <span class="contact-info__icon">üìç</span>
            <span class="contact-info__text" id="clinic-address">–ê–¥—Ä–µ—Å—ä—Ç —â–µ –±—ä–¥–µ –¥–æ–±–∞–≤–µ–Ω</span>
          </div>
        </div>
      </section>
    </div>
  </template>

  <!-- Booking Page Template -->
  <template id="template-booking">
    <div class="page page--booking">
      <div class="page__header">
        <h1 class="page__title">–ó–∞–ø–∞–∑–∏ —á–∞—Å</h1>
        <p class="page__subtitle">–ò–∑–±–µ—Ä–µ—Ç–µ —É–¥–æ–±–Ω–∞ –¥–∞—Ç–∞ –∏ —á–∞—Å</p>
      </div>

      <form id="booking-form" class="booking-form">
        <!-- Step 1: Date Selection -->
        <div class="booking-step" data-step="1">
          <h2 class="booking-step__title">
            <span class="booking-step__number">1</span>
            –ò–∑–±–µ—Ä–µ—Ç–µ –¥–∞—Ç–∞
          </h2>
          <div id="booking-calendar" class="booking-calendar">
            <div class="calendar">
              <div class="calendar__header">
                <button type="button" class="calendar__nav calendar__nav--prev" aria-label="–ü—Ä–µ–¥–∏—à–µ–Ω –º–µ—Å–µ—Ü">‚Äπ</button>
                <span class="calendar__month-year"></span>
                <button type="button" class="calendar__nav calendar__nav--next" aria-label="–°–ª–µ–¥–≤–∞—â –º–µ—Å–µ—Ü">‚Ä∫</button>
              </div>
              <div class="calendar__weekdays">
                <span>–ü–Ω</span><span>–í—Ç</span><span>–°—Ä</span><span>–ß—Ç</span><span>–ü—Ç</span><span>–°–±</span><span>–ù–¥</span>
              </div>
              <div class="calendar__days"></div>
            </div>
          </div>
          <input type="hidden" name="date" id="booking-date" required>
        </div>

        <!-- Step 2: Time Selection -->
        <div class="booking-step" data-step="2" hidden>
          <h2 class="booking-step__title">
            <span class="booking-step__number">2</span>
            –ò–∑–±–µ—Ä–µ—Ç–µ —á–∞—Å
          </h2>
          <p class="booking-step__date-display">
            –ò–∑–±—Ä–∞–Ω–∞ –¥–∞—Ç–∞: <strong id="selected-date-display"></strong>
          </p>
          <div id="time-slots" class="time-slots">
            <!-- Time slots loaded dynamically -->
          </div>
          <input type="hidden" name="time" id="booking-time" required>
        </div>

        <!-- Step 3: Contact Info -->
        <div class="booking-step" data-step="3" hidden>
          <h2 class="booking-step__title">
            <span class="booking-step__number">3</span>
            –í–∞—à–∏—Ç–µ –¥–∞–Ω–Ω–∏
          </h2>
          
          <div class="form-group">
            <label for="patient-name" class="form-label">–ò–º–µ –∏ —Ñ–∞–º–∏–ª–∏—è *</label>
            <input 
              type="text" 
              id="patient-name" 
              name="patientName" 
              class="form-input" 
              placeholder="–í—ä–≤–µ–¥–µ—Ç–µ –≤–∞—à–µ—Ç–æ –∏–º–µ"
              required
              minlength="3"
              autocomplete="name"
            >
            <span class="form-error"></span>
          </div>

          <div class="form-group">
            <label for="patient-phone" class="form-label">–¢–µ–ª–µ—Ñ–æ–Ω *</label>
            <input 
              type="tel" 
              id="patient-phone" 
              name="patientPhone" 
              class="form-input" 
              placeholder="+359 88 123 4567"
              required
              pattern="(\+359|0)[0-9]{9}"
              autocomplete="tel"
            >
            <span class="form-hint">–©–µ –≤–∏ —Å–µ –æ–±–∞–¥–∏–º –∑–∞ –ø–æ—Ç–≤—ä—Ä–∂–¥–µ–Ω–∏–µ –Ω–∞ —á–∞—Å–∞</span>
            <span class="form-error"></span>
          </div>

          <div class="form-group">
            <label for="patient-reason" class="form-label">–ü—Ä–∏—á–∏–Ω–∞ –∑–∞ –ø–æ—Å–µ—â–µ–Ω–∏–µ (–ø–æ –∏–∑–±–æ—Ä)</label>
            <textarea 
              id="patient-reason" 
              name="reason" 
              class="form-input form-textarea" 
              placeholder="–û–ø–∏—à–µ—Ç–µ –Ω–∞–∫—Ä–∞—Ç–∫–æ –ø—Ä–∏—á–∏–Ω–∞—Ç–∞ –∑–∞ –ø–æ—Å–µ—â–µ–Ω–∏–µ—Ç–æ"
              rows="3"
            ></textarea>
          </div>
        </div>

        <!-- Summary & Submit -->
        <div class="booking-step" data-step="4" hidden>
          <h2 class="booking-step__title">
            <span class="booking-step__number">4</span>
            –ü–æ—Ç–≤—ä—Ä–∂–¥–µ–Ω–∏–µ
          </h2>
          
          <div class="booking-summary">
            <div class="booking-summary__item">
              <span class="booking-summary__label">–î–∞—Ç–∞:</span>
              <span class="booking-summary__value" id="summary-date"></span>
            </div>
            <div class="booking-summary__item">
              <span class="booking-summary__label">–ß–∞—Å:</span>
              <span class="booking-summary__value" id="summary-time"></span>
            </div>
            <div class="booking-summary__item">
              <span class="booking-summary__label">–ò–º–µ:</span>
              <span class="booking-summary__value" id="summary-name"></span>
            </div>
            <div class="booking-summary__item">
              <span class="booking-summary__label">–¢–µ–ª–µ—Ñ–æ–Ω:</span>
              <span class="booking-summary__value" id="summary-phone"></span>
            </div>
          </div>

          <div class="booking-notice">
            <span class="booking-notice__icon">‚ÑπÔ∏è</span>
            <p>–°–ª–µ–¥ –∏–∑–ø—Ä–∞—â–∞–Ω–µ –Ω–∞ –∑–∞—è–≤–∫–∞—Ç–∞, —â–µ –≤–∏ —Å–µ –æ–±–∞–¥–∏–º –∑–∞ –ø–æ—Ç–≤—ä—Ä–∂–¥–µ–Ω–∏–µ –Ω–∞ —á–∞—Å–∞.</p>
          </div>
        </div>

        <!-- Navigation Buttons -->
        <div class="booking-nav">
          <button type="button" id="booking-prev" class="btn btn--outline" hidden>
            ‚Üê –ù–∞–∑–∞–¥
          </button>
          <button type="button" id="booking-next" class="btn btn--primary" disabled>
            –ù–∞–ø—Ä–µ–¥ ‚Üí
          </button>
          <button type="submit" id="booking-submit" class="btn btn--primary btn--lg" hidden>
            <span class="btn__icon">‚úì</span>
            –ò–∑–ø—Ä–∞—Ç–∏ –∑–∞—è–≤–∫–∞
          </button>
        </div>
      </form>

      <!-- Success Message -->
      <div id="booking-success" class="booking-success" hidden>
        <div class="booking-success__icon">‚úÖ</div>
        <h2 class="booking-success__title">–ó–∞—è–≤–∫–∞—Ç–∞ –µ –∏–∑–ø—Ä–∞—Ç–µ–Ω–∞!</h2>
        <p class="booking-success__text">
          –ë–ª–∞–≥–æ–¥–∞—Ä–∏–º –≤–∏! –©–µ —Å–µ —Å–≤—ä—Ä–∂–µ–º —Å –≤–∞—Å –Ω–∞ –ø–æ—Å–æ—á–µ–Ω–∏—è —Ç–µ–ª–µ—Ñ–æ–Ω –∑–∞ –ø–æ—Ç–≤—ä—Ä–∂–¥–µ–Ω–∏–µ –Ω–∞ —á–∞—Å–∞.
        </p>
        <a href="#/" class="btn btn--primary">–ö—ä–º –Ω–∞—á–∞–ª–æ</a>
      </div>
    </div>
  </template>

  <!-- Admin Login Template -->
  <template id="template-admin-login">
    <div class="page page--login">
      <div class="login-card">
        <div class="login-card__header">
          <h1 class="login-card__title">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏—è</h1>
          <p class="login-card__subtitle">–í–ª–µ–∑—Ç–µ —Å Google –∞–∫–∞—É–Ω—Ç</p>
        </div>
        <div class="login-card__body">
          <button id="google-login-btn" class="btn btn--google">
            <svg class="btn__icon-svg" viewBox="0 0 24 24" width="20" height="20">
              <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
              <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
              <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
              <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
            </svg>
            –í—Ö–æ–¥ —Å Google
          </button>
        </div>
        <div class="login-card__footer">
          <a href="#/" class="login-card__link">‚Üê –û–±—Ä–∞—Ç–Ω–æ –∫—ä–º —Å–∞–π—Ç–∞</a>
        </div>
      </div>
    </div>
  </template>

  <!-- Admin Dashboard Template -->
  <template id="template-admin-dashboard">
    <div class="page page--admin">
      <div class="admin-header">
        <h1 class="admin-header__title">–¢–∞–±–ª–æ –∑–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</h1>
        <div class="admin-header__actions">
          <button id="admin-sync-btn" class="btn btn--outline btn--sm">
            <span class="btn__icon">üîÑ</span>
            –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–∞–π
          </button>
        </div>
      </div>

      <!-- Quick Stats -->
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-card__icon stat-card__icon--pending">‚è≥</div>
          <div class="stat-card__content">
            <span class="stat-card__value" id="stat-pending">0</span>
            <span class="stat-card__label">–ß–∞–∫–∞—â–∏ –ø–æ—Ç–≤—ä—Ä–∂–¥–µ–Ω–∏–µ</span>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-card__icon stat-card__icon--today">üìÖ</div>
          <div class="stat-card__content">
            <span class="stat-card__value" id="stat-today">0</span>
            <span class="stat-card__label">–ß–∞—Å–æ–≤–µ –¥–Ω–µ—Å</span>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-card__icon stat-card__icon--revenue">üí∞</div>
          <div class="stat-card__content">
            <span class="stat-card__value" id="stat-revenue">0 ‚Ç¨</span>
            <span class="stat-card__label">–ü—Ä–∏—Ö–æ–¥–∏ —Ç–æ–∑–∏ –º–µ—Å–µ—Ü</span>
          </div>
        </div>
      </div>

      <!-- Quick Actions -->
      <div class="quick-actions">
        <h2 class="section-title">–ë—ä—Ä–∑–∏ –¥–µ–π—Å—Ç–≤–∏—è</h2>
        <div class="quick-actions__grid">
          <a href="#/admin/calendar" class="quick-action">
            <span class="quick-action__icon">üìÖ</span>
            <span class="quick-action__label">–ö–∞–ª–µ–Ω–¥–∞—Ä</span>
          </a>
          <a href="#/admin/finance" class="quick-action">
            <span class="quick-action__icon">üí∞</span>
            <span class="quick-action__label">–§–∏–Ω–∞–Ω—Å–∏</span>
          </a>
          <a href="#/admin/settings" class="quick-action">
            <span class="quick-action__icon">‚öôÔ∏è</span>
            <span class="quick-action__label">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
          </a>
        </div>
      </div>

      <!-- Pending Appointments -->
      <div class="pending-section">
        <h2 class="section-title">–ß–∞–∫–∞—â–∏ –ø–æ—Ç–≤—ä—Ä–∂–¥–µ–Ω–∏–µ</h2>
        <div id="pending-list" class="appointment-list">
          <!-- Populated by JS -->
          <p class="empty-state">–ù—è–º–∞ —á–∞–∫–∞—â–∏ –∑–∞—è–≤–∫–∏</p>
        </div>
      </div>

      <!-- Today's Appointments -->
      <div class="today-section">
        <h2 class="section-title">–î–Ω–µ—à–Ω–∏ —á–∞—Å–æ–≤–µ</h2>
        <div id="today-list" class="appointment-list">
          <!-- Populated by JS -->
          <p class="empty-state">–ù—è–º–∞ —á–∞—Å–æ–≤–µ –∑–∞ –¥–Ω–µ—Å</p>
        </div>
      </div>
    </div>
  </template>

  <!-- Admin Calendar Template -->
  <template id="template-admin-calendar">
    <div class="page page--admin-calendar">
      <div class="admin-header">
        <div class="admin-header__left">
          <a href="#/admin" class="admin-header__back">‚Üê –ù–∞–∑–∞–¥</a>
          <h1 class="admin-header__title">–ö–∞–ª–µ–Ω–¥–∞—Ä</h1>
        </div>
        <div class="admin-header__actions">
          <button id="add-appointment-btn" class="btn btn--primary btn--sm">
            <span class="btn__icon">+</span>
            –ù–æ–≤ —á–∞—Å
          </button>
        </div>
      </div>

      <!-- View Toggle & Date Navigation -->
      <div class="calendar-controls">
        <div class="calendar-controls__nav">
          <button id="cal-prev" class="btn btn--icon">‚Äπ</button>
          <span id="cal-current-period" class="calendar-controls__period">–Ø–Ω—É–∞—Ä–∏ 2026</span>
          <button id="cal-next" class="btn btn--icon">‚Ä∫</button>
          <button id="cal-today" class="btn btn--outline btn--sm">–î–Ω–µ—Å</button>
        </div>
        <div class="calendar-controls__view">
          <button class="btn btn--sm view-toggle active" data-view="week">–°–µ–¥–º–∏—Ü–∞</button>
          <button class="btn btn--sm view-toggle" data-view="day">–î–µ–Ω</button>
        </div>
      </div>

      <!-- Calendar Grid -->
      <div id="admin-calendar-grid" class="admin-calendar">
        <!-- Populated by JS -->
      </div>

      <!-- Legend -->
      <div class="calendar-legend">
        <div class="calendar-legend__item">
          <span class="calendar-legend__color calendar-legend__color--pending"></span>
          <span>–ß–∞–∫–∞—â</span>
        </div>
        <div class="calendar-legend__item">
          <span class="calendar-legend__color calendar-legend__color--confirmed"></span>
          <span>–ü–æ—Ç–≤—ä—Ä–¥–µ–Ω</span>
        </div>
        <div class="calendar-legend__item">
          <span class="calendar-legend__color calendar-legend__color--completed"></span>
          <span>–ó–∞–≤—ä—Ä—à–µ–Ω</span>
        </div>
        <div class="calendar-legend__item">
          <span class="calendar-legend__color calendar-legend__color--cancelled"></span>
          <span>–û—Ç–º–µ–Ω–µ–Ω</span>
        </div>
      </div>
    </div>
  </template>

  <!-- Admin Finance Template -->
  <template id="template-admin-finance">
    <div class="page page--admin-finance">
      <div class="admin-header">
        <div class="admin-header__left">
          <a href="#/admin" class="admin-header__back">‚Üê –ù–∞–∑–∞–¥</a>
          <h1 class="admin-header__title">–§–∏–Ω–∞–Ω—Å–∏</h1>
        </div>
        <div class="admin-header__actions">
          <button id="add-revenue-btn" class="btn btn--primary btn--sm">
            <span class="btn__icon">+</span>
            –î–æ–±–∞–≤–∏ –ø—Ä–∏—Ö–æ–¥
          </button>
        </div>
      </div>

      <!-- Summary Cards -->
      <div class="finance-summary">
        <div class="finance-card">
          <span class="finance-card__label">–î–Ω–µ—Å</span>
          <span class="finance-card__value" id="finance-today">0 ‚Ç¨</span>
        </div>
        <div class="finance-card">
          <span class="finance-card__label">–¢–∞–∑–∏ —Å–µ–¥–º–∏—Ü–∞</span>
          <span class="finance-card__value" id="finance-week">0 ‚Ç¨</span>
        </div>
        <div class="finance-card">
          <span class="finance-card__label">–¢–æ–∑–∏ –º–µ—Å–µ—Ü</span>
          <span class="finance-card__value" id="finance-month">0 ‚Ç¨</span>
        </div>
      </div>

      <!-- Filter Controls -->
      <div class="finance-filters">
        <div class="form-group form-group--inline">
          <label for="finance-date-from">–û—Ç:</label>
          <input type="date" id="finance-date-from" class="form-input form-input--sm">
        </div>
        <div class="form-group form-group--inline">
          <label for="finance-date-to">–î–æ:</label>
          <input type="date" id="finance-date-to" class="form-input form-input--sm">
        </div>
        <div class="form-group form-group--inline">
          <label for="finance-type">–¢–∏–ø:</label>
          <select id="finance-type" class="form-input form-input--sm">
            <option value="">–í—Å–∏—á–∫–∏</option>
            <option value="official">–û—Ñ–∏—Ü–∏–∞–ª–Ω–∏ (–ù–ó–û–ö)</option>
            <option value="custom">–î–æ–ø–ª–∞—â–∞–Ω–∏—è</option>
          </select>
        </div>
        <button id="finance-export-btn" class="btn btn--outline btn--sm">
          üì• –ï–∫—Å–ø–æ—Ä—Ç
        </button>
      </div>

      <!-- Transactions List -->
      <div class="transactions-section">
        <h2 class="section-title">–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏</h2>
        <div id="transactions-list" class="transactions-list">
          <!-- Populated by JS -->
          <p class="empty-state">–ù—è–º–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∑–∞ –∏–∑–±—Ä–∞–Ω–∏—è –ø–µ—Ä–∏–æ–¥</p>
        </div>
      </div>
    </div>
  </template>

  <!-- Admin Settings Template -->
  <template id="template-admin-settings">
    <div class="page page--admin-settings">
      <div class="admin-header">
        <div class="admin-header__left">
          <a href="#/admin" class="admin-header__back">‚Üê –ù–∞–∑–∞–¥</a>
          <h1 class="admin-header__title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h1>
        </div>
      </div>

      <form id="settings-form" class="settings-form">
        <!-- Work Hours -->
        <section class="settings-section">
          <h2 class="settings-section__title">–†–∞–±–æ—Ç–Ω–æ –≤—Ä–µ–º–µ</h2>
          
          <div class="settings-row">
            <span class="settings-row__label">–°—É—Ç—Ä–∏–Ω:</span>
            <div class="settings-row__inputs">
              <input type="time" id="work-morning-start" class="form-input form-input--sm" value="09:00">
              <span>-</span>
              <input type="time" id="work-morning-end" class="form-input form-input--sm" value="12:00">
            </div>
          </div>

          <div class="settings-row">
            <span class="settings-row__label">–°–ª–µ–¥–æ–±–µ–¥:</span>
            <div class="settings-row__inputs">
              <input type="time" id="work-afternoon-start" class="form-input form-input--sm" value="13:30">
              <span>-</span>
              <input type="time" id="work-afternoon-end" class="form-input form-input--sm" value="17:00">
            </div>
          </div>
        </section>

        <!-- Working Days -->
        <section class="settings-section">
          <h2 class="settings-section__title">–†–∞–±–æ—Ç–Ω–∏ –¥–Ω–∏</h2>
          <div class="checkbox-group">
            <label class="checkbox">
              <input type="checkbox" name="workingDays" value="1" checked>
              <span>–ü–æ–Ω–µ–¥–µ–ª–Ω–∏–∫</span>
            </label>
            <label class="checkbox">
              <input type="checkbox" name="workingDays" value="2" checked>
              <span>–í—Ç–æ—Ä–Ω–∏–∫</span>
            </label>
            <label class="checkbox">
              <input type="checkbox" name="workingDays" value="3" checked>
              <span>–°—Ä—è–¥–∞</span>
            </label>
            <label class="checkbox">
              <input type="checkbox" name="workingDays" value="4" checked>
              <span>–ß–µ—Ç–≤—ä—Ä—Ç—ä–∫</span>
            </label>
            <label class="checkbox">
              <input type="checkbox" name="workingDays" value="5" checked>
              <span>–ü–µ—Ç—ä–∫</span>
            </label>
            <label class="checkbox">
              <input type="checkbox" name="workingDays" value="6">
              <span>–°—ä–±–æ—Ç–∞</span>
            </label>
            <label class="checkbox">
              <input type="checkbox" name="workingDays" value="7">
              <span>–ù–µ–¥–µ–ª—è</span>
            </label>
          </div>
        </section>

        <!-- Special Dates -->
        <section class="settings-section">
          <h2 class="settings-section__title">–°–ø–µ—Ü–∏–∞–ª–Ω–∏ –¥–∞—Ç–∏</h2>
          <p class="settings-section__hint">–ö–ª–∏–∫–Ω–µ—Ç–µ –≤—ä—Ä—Ö—É –¥–∞—Ç–∞ –∑–∞ –¥–∞ —è –º–∞—Ä–∫–∏—Ä–∞—Ç–µ –∫–∞—Ç–æ —Ä–∞–±–æ—Ç–µ–Ω –¥–µ–Ω (–∑–µ–ª–µ–Ω–æ) –∏–ª–∏ –ø–æ—á–∏–≤–µ–Ω (—á–µ—Ä–≤–µ–Ω–æ)</p>
          <div id="special-dates-calendar" class="special-dates-calendar">
            <!-- Calendar populated by JS -->
          </div>
          <div id="special-dates-list" class="special-dates-list">
            <!-- List of special dates -->
          </div>
        </section>

        <!-- Default Slot Duration -->
        <section class="settings-section">
          <h2 class="settings-section__title">–ü—Ä–æ–¥—ä–ª–∂–∏—Ç–µ–ª–Ω–æ—Å—Ç –ø–æ –ø–æ–¥—Ä–∞–∑–±–∏—Ä–∞–Ω–µ</h2>
          <div class="radio-group">
            <label class="radio">
              <input type="radio" name="defaultDuration" value="30">
              <span>30 –º–∏–Ω—É—Ç–∏</span>
            </label>
            <label class="radio">
              <input type="radio" name="defaultDuration" value="60" checked>
              <span>1 —á–∞—Å</span>
            </label>
            <label class="radio">
              <input type="radio" name="defaultDuration" value="90">
              <span>1.5 —á–∞—Å–∞</span>
            </label>
          </div>
        </section>

        <div class="settings-actions">
          <button type="submit" class="btn btn--primary btn--lg">
            üíæ –ó–∞–ø–∞–∑–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏—Ç–µ
          </button>
        </div>
      </form>
    </div>
  </template>

  <!-- Modals -->
  <div id="modal-container" class="modal-container" hidden>
    <div class="modal-backdrop"></div>
    <div class="modal" role="dialog" aria-modal="true">
      <div class="modal__header">
        <h2 class="modal__title"></h2>
        <button class="modal__close" aria-label="–ó–∞—Ç–≤–æ—Ä–∏">√ó</button>
      </div>
      <div class="modal__body"></div>
      <div class="modal__footer"></div>
    </div>
  </div>

  <!-- Appointment Modal Template -->
  <template id="template-modal-appointment">
    <div class="appointment-modal">
      <div class="appointment-modal__info">
        <div class="appointment-modal__row">
          <span class="appointment-modal__label">–ü–∞—Ü–∏–µ–Ω—Ç:</span>
          <span class="appointment-modal__value" data-field="patientName"></span>
        </div>
        <div class="appointment-modal__row">
          <span class="appointment-modal__label">–¢–µ–ª–µ—Ñ–æ–Ω:</span>
          <a class="appointment-modal__value appointment-modal__phone" data-field="patientPhone" href=""></a>
        </div>
        <div class="appointment-modal__row">
          <span class="appointment-modal__label">–î–∞—Ç–∞:</span>
          <span class="appointment-modal__value" data-field="date"></span>
        </div>
        <div class="appointment-modal__row">
          <span class="appointment-modal__label">–ß–∞—Å:</span>
          <span class="appointment-modal__value" data-field="time"></span>
        </div>
        <div class="appointment-modal__row">
          <span class="appointment-modal__label">–ü—Ä–æ–¥—ä–ª–∂–∏—Ç–µ–ª–Ω–æ—Å—Ç:</span>
          <select class="form-input form-input--sm" data-field="duration">
            <option value="30">30 –º–∏–Ω</option>
            <option value="60">1 —á–∞—Å</option>
            <option value="90">1.5 —á–∞—Å–∞</option>
            <option value="120">2 —á–∞—Å–∞</option>
            <option value="180">3 —á–∞—Å–∞</option>
          </select>
        </div>
        <div class="appointment-modal__row">
          <span class="appointment-modal__label">–ü—Ä–∏—á–∏–Ω–∞:</span>
          <span class="appointment-modal__value" data-field="reason"></span>
        </div>
        <div class="appointment-modal__row">
          <span class="appointment-modal__label">–°—Ç–∞—Ç—É—Å:</span>
          <span class="appointment-modal__status" data-field="status"></span>
        </div>
      </div>
      <div class="appointment-modal__actions">
        <button class="btn btn--success" data-action="confirm">‚úì –ü–æ—Ç–≤—ä—Ä–¥–∏</button>
        <button class="btn btn--danger" data-action="cancel">‚úó –û—Ç–∫–∞–∂–∏</button>
        <button class="btn btn--primary" data-action="revenue">üí∞ –î–æ–±–∞–≤–∏ –ø—Ä–∏—Ö–æ–¥</button>
        <button class="btn btn--outline" data-action="complete">‚úì –ó–∞–≤—ä—Ä—à–∏</button>
      </div>
    </div>
  </template>

  <!-- Add Revenue Modal Template -->
  <template id="template-modal-revenue">
    <form class="revenue-form" id="revenue-form">
      <div class="revenue-tabs">
        <button type="button" class="revenue-tab active" data-tab="official">–ù–ó–û–ö –ø—Ä–æ—Ü–µ–¥—É—Ä–∞</button>
        <button type="button" class="revenue-tab" data-tab="custom">–î–æ–ø–ª–∞—â–∞–Ω–µ</button>
      </div>

      <!-- Official (NHIF) Revenue -->
      <div class="revenue-tab-content" data-content="official">
        <div class="form-group">
          <label class="form-label">–¢—ä—Ä—Å–∏ –ø—Ä–æ—Ü–µ–¥—É—Ä–∞</label>
          <input 
            type="text" 
            id="procedure-search" 
            class="form-input" 
            placeholder="–í—ä–≤–µ–¥–µ—Ç–µ –∏–º–µ –∏–ª–∏ –∫–æ–¥..."
            autocomplete="off"
          >
          <div id="procedure-results" class="procedure-results"></div>
        </div>
        <div class="form-group">
          <label class="form-label">–ò–∑–±—Ä–∞–Ω–∞ –ø—Ä–æ—Ü–µ–¥—É—Ä–∞</label>
          <div id="selected-procedure" class="selected-procedure">
            <span class="selected-procedure__empty">–ú–æ–ª—è, –∏–∑–±–µ—Ä–µ—Ç–µ –ø—Ä–æ—Ü–µ–¥—É—Ä–∞</span>
          </div>
          <input type="hidden" name="procedureCode" id="procedure-code">
        </div>
        <div class="form-group">
          <label class="form-label">–¶–µ–Ω–∞ (‚Ç¨)</label>
          <input type="number" id="official-amount" class="form-input" readonly>
        </div>
      </div>

      <!-- Custom Revenue -->
      <div class="revenue-tab-content" data-content="custom" hidden>
        <div class="form-group">
          <label class="form-label">–°—É–º–∞ (‚Ç¨) *</label>
          <input type="number" name="customAmount" class="form-input" step="0.01" min="0" placeholder="0.00">
        </div>
        <div class="form-group">
          <label class="form-label">–û–ø–∏—Å–∞–Ω–∏–µ *</label>
          <input type="text" name="customDescription" class="form-input" placeholder="–ù–∞–ø—Ä. –î–æ–ø–ª–∞—â–∞–Ω–µ –∑–∞ –∏–∑–±–µ–ª–≤–∞–Ω–µ">
        </div>
      </div>

      <!-- Common Fields -->
      <div class="form-group">
        <label class="form-label">–ù–∞—á–∏–Ω –Ω–∞ –ø–ª–∞—â–∞–Ω–µ</label>
        <select name="paymentMethod" class="form-input">
          <option value="cash">–í –±—Ä–æ–π</option>
          <option value="card">–° –∫–∞—Ä—Ç–∞</option>
          <option value="bank_transfer">–ë–∞–Ω–∫–æ–≤ –ø—Ä–µ–≤–æ–¥</option>
        </select>
      </div>
      <div class="form-group">
        <label class="form-label">–ë–µ–ª–µ–∂–∫–∏</label>
        <textarea name="notes" class="form-input form-textarea" rows="2" placeholder="–î–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–Ω–∏ –±–µ–ª–µ–∂–∫–∏ (–ø–æ –∏–∑–±–æ—Ä)"></textarea>
      </div>
    </form>
  </template>

  <!-- Add Appointment Modal Template -->
  <template id="template-modal-add-appointment">
    <form class="add-appointment-form" id="add-appointment-form">
      <div class="form-group">
        <label class="form-label">–ü–∞—Ü–∏–µ–Ω—Ç *</label>
        <input 
          type="text" 
          name="patientName" 
          class="form-input" 
          placeholder="–ò–º–µ –Ω–∞ –ø–∞—Ü–∏–µ–Ω—Ç"
          required
          autocomplete="off"
        >
        <div id="patient-autocomplete" class="patient-autocomplete"></div>
      </div>
      <div class="form-group">
        <label class="form-label">–¢–µ–ª–µ—Ñ–æ–Ω *</label>
        <input 
          type="tel" 
          name="patientPhone" 
          class="form-input" 
          placeholder="+359 88 123 4567"
          required
          pattern="(\+359|0)[0-9]{9}"
        >
      </div>
      <div class="form-row">
        <div class="form-group">
          <label class="form-label">–î–∞—Ç–∞ *</label>
          <input type="date" name="date" class="form-input" required>
        </div>
        <div class="form-group">
          <label class="form-label">–ß–∞—Å *</label>
          <input type="time" name="startTime" class="form-input" required>
        </div>
      </div>
      <div class="form-group">
        <label class="form-label">–ü—Ä–æ–¥—ä–ª–∂–∏—Ç–µ–ª–Ω–æ—Å—Ç</label>
        <select name="duration" class="form-input">
          <option value="30">30 –º–∏–Ω—É—Ç–∏</option>
          <option value="60" selected>1 —á–∞—Å</option>
          <option value="90">1.5 —á–∞—Å–∞</option>
          <option value="120">2 —á–∞—Å–∞</option>
          <option value="180">3 —á–∞—Å–∞</option>
        </select>
      </div>
      <div class="form-group">
        <label class="form-label">–ü—Ä–∏—á–∏–Ω–∞</label>
        <textarea name="reason" class="form-input form-textarea" rows="2" placeholder="–ü—Ä–∏—á–∏–Ω–∞ –∑–∞ –ø–æ—Å–µ—â–µ–Ω–∏–µ (–ø–æ –∏–∑–±–æ—Ä)"></textarea>
      </div>
      <label class="checkbox">
        <input type="checkbox" name="sendSms" checked>
        <span>–ò–∑–ø—Ä–∞—Ç–∏ SMS –∏–∑–≤–µ—Å—Ç–∏–µ</span>
      </label>
    </form>
  </template>

  <!-- Scripts -->
  <script src="js/config.js"></script>
  <script src="js/utils.js"></script>
  <script src="js/api.js"></script>
  <script src="js/auth.js"></script>
  <script src="js/offline.js"></script>
  <script src="js/router.js"></script>
  <script src="js/components/calendar.js"></script>
  <script src="js/components/booking.js"></script>
  <script src="js/components/admin-calendar.js"></script>
  <script src="js/components/admin-finance.js"></script>
  <script src="js/components/admin-settings.js"></script>
  <script src="js/components/modal.js"></script>
  <script src="js/app.js"></script>
</body>
</html>
