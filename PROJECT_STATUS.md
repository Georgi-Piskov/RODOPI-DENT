# üìä –¢–ï–ö–£–©–û –°–™–°–¢–û–Ø–ù–ò–ï –ù–ê –ü–†–û–ï–ö–¢–ê - RODOPI DENT

> **–ü–æ—Å–ª–µ–¥–Ω–∞ –∞–∫—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è:** 28 —è–Ω—É–∞—Ä–∏ 2026  
> **–í–µ—Ä—Å–∏—è:** 3.7 (–§–∏–Ω–∞–Ω—Å–æ–≤ –º–æ–¥—É–ª + UI –ø–æ–¥–æ–±—Ä–µ–Ω–∏—è)

---

## üèóÔ∏è –ê–†–•–ò–¢–ï–ö–¢–£–†–ê

### Frontend (PWA)
- **–•–æ—Å—Ç–∏–Ω–≥:** GitHub Pages
- **URL:** https://georgi-piskov.github.io/RODOPI-DENT/
- **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:** Vanilla JS, CSS, HTML (–±–µ–∑ frameworks)
- **–†—É—Ç–∏—Ä–∞–Ω–µ:** Hash-based (#/booking, #/admin/calendar, etc.)
- **Cache –≤–µ—Ä—Å–∏—è:** v=3.7

### Backend (n8n)
- **URL:** https://n8n.simeontsvetanovn8nworkflows.site
- **Webhooks –±–∞–∑–∞:** /webhook/{endpoint-name}
- **–í–µ—Ä—Å–∏—è n8n:** 2.0.2+

### –î–∞–Ω–Ω–∏
- **–û—Å–Ω–æ–≤–Ω–∞ –±–∞–∑–∞:** Google Calendar (rodopi.dent@gmail.com)
- **–î–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–Ω–æ:** Google Sheets –∑–∞ —Ñ–∏–Ω–∞–Ω—Å–∏, –ù–ó–û–ö —Ü–µ–Ω–∏, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- **Sheet ID:** 1hv4XAfHhScA40Bm1kQ3I-Ih4SJuCBpOJxTOYDNb167g
- **–í–∞–ª—É—Ç–∞:** EUR (–µ–≤—Ä–æ)

### –ò–∑–≤–µ—Å—Ç–∏—è
- **SMS:** Twilio (–∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–∞–Ω –≤ n8n)
- **Telegram:** Bot –∑–∞ –∏–∑–≤–µ—Å—Ç–∏—è –∫—ä–º –¥–æ–∫—Ç–æ—Ä–∞ (Ro–¥–æ–ø–∏–î–µ–Ω—ÇBot)
- **Telegram Admin Chat ID:** 2146283697

---

## üìÅ –°–¢–†–£–ö–¢–£–†–ê –ù–ê –§–ê–ô–õ–û–í–ï–¢–ï

```
RODOPI-DENT-system/
‚îú‚îÄ‚îÄ index.html                    # –û—Å–Ω–æ–≤–µ–Ω HTML (v=3.7)
‚îú‚îÄ‚îÄ manifest.json                 # PWA manifest
‚îú‚îÄ‚îÄ sw.js                         # Service Worker (v=3.7)
‚îÇ
‚îú‚îÄ‚îÄ css/
‚îÇ   ‚îî‚îÄ‚îÄ main.css                  # –í—Å–∏—á–∫–∏ —Å—Ç–∏–ª–æ–≤–µ (v=3.7)
‚îÇ
‚îú‚îÄ‚îÄ js/
‚îÇ   ‚îú‚îÄ‚îÄ config.js                 # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ endpoints
‚îÇ   ‚îú‚îÄ‚îÄ utils.js                  # –ü–æ–º–æ—â–Ω–∏ —Ñ—É–Ω–∫—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ api.js                    # API –∫–ª–∏–µ–Ω—Ç —Å Twilio SMS
‚îÇ   ‚îú‚îÄ‚îÄ auth.js                   # Google OAuth2
‚îÇ   ‚îú‚îÄ‚îÄ router.js                 # Hash —Ä—É—Ç–∏—Ä–∞–Ω–µ
‚îÇ   ‚îú‚îÄ‚îÄ calendar.js               # –ê–¥–º–∏–Ω –∫–∞–ª–µ–Ω–¥–∞—Ä + pending ‚ö†Ô∏è –ù–ï –ü–ò–ü–ê–ô
‚îÇ   ‚îî‚îÄ‚îÄ app.js                    # –û—Å–Ω–æ–≤–Ω–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å —Ñ–∏–Ω–∞–Ω—Å–∏ (v=3.7)
‚îÇ
‚îú‚îÄ‚îÄ n8n-workflows/
‚îÇ   ‚îú‚îÄ‚îÄ 01-slots-webhook.json     # –°–≤–æ–±–æ–¥–Ω–∏ —á–∞—Å–æ–≤–µ
‚îÇ   ‚îú‚îÄ‚îÄ 02-booking-webhook.json   # –ù–æ–≤–∞ —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏—è + Twilio SMS
‚îÇ   ‚îú‚îÄ‚îÄ 06a-finance-get.json      # –§–∏–Ω–∞–Ω—Å–∏ GET (EUR) ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ 06b-finance-add.json      # –§–∏–Ω–∞–Ω—Å–∏ ADD (EUR) ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ 10-telegram-callback.json # Telegram –±—É—Ç–æ–Ω–∏ ‚Üí Calendar ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ 11-calendar-events.json   # –ó–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ —Å—ä–±–∏—Ç–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ 12-calendar-create.json   # –°—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ —Å—ä–±–∏—Ç–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ 13-calendar-update.json   # –û–±–Ω–æ–≤—è–≤–∞–Ω–µ –Ω–∞ —Å—ä–±–∏—Ç–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ 14-calendar-delete.json   # –ò–∑—Ç—Ä–∏–≤–∞–Ω–µ –Ω–∞ —Å—ä–±–∏—Ç–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ 15-public-slots.json      # –ü—É–±–ª–∏—á–Ω–∏ —Å–≤–æ–±–æ–¥–Ω–∏ —á–∞—Å–æ–≤–µ
‚îÇ   ‚îú‚îÄ‚îÄ 16-public-booking.json    # –ü—É–±–ª–∏—á–Ω–∞ —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏—è + Telegram ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ 17-send-sms.json          # SMS –∏–∑–ø—Ä–∞—â–∞–Ω–µ —Å Twilio
‚îÇ   ‚îú‚îÄ‚îÄ 18-auto-expire-pending.json # –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∏–∑—Ç–∏—á–∞–Ω–µ
‚îÇ   ‚îî‚îÄ‚îÄ 19-nhif-prices.json       # –ù–ó–û–ö —Ü–µ–Ω–∏ (EUR) ‚úÖ
‚îÇ
‚îú‚îÄ‚îÄ assets/
‚îÇ   ‚îú‚îÄ‚îÄ logo.png
‚îÇ   ‚îî‚îÄ‚îÄ icons/
‚îÇ
‚îî‚îÄ‚îÄ docs/
    ‚îú‚îÄ‚îÄ google-sheets-setup.js    # –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–∞ Sheets
    ‚îî‚îÄ‚îÄ import-nhif-prices.js     # –ù–ó–û–ö —Ü–µ–Ω–∏ –≤ EUR
```

---

## üîó API ENDPOINTS

### –ü—É–±–ª–∏—á–Ω–∏ (–∑–∞ –ø–∞—Ü–∏–µ–Ω—Ç–∏)
| Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|
| `/public-slots` | –°–≤–æ–±–æ–¥–Ω–∏ —á–∞—Å–æ–≤–µ –∑–∞ –¥–∞—Ç–∞ |
| `/public-booking` | –ù–æ–≤–∞ —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏—è |

### –ê–¥–º–∏–Ω (Google Calendar)
| Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|
| `/calendar-events` | –°–ø–∏—Å—ä–∫ —Å—ä–±–∏—Ç–∏—è |
| `/calendar-create` | –ù–æ–≤ —á–∞—Å |
| `/calendar-update` | –†–µ–¥–∞–∫—Ü–∏—è –Ω–∞ —á–∞—Å |
| `/calendar-delete` | –ò–∑—Ç—Ä–∏–≤–∞–Ω–µ –Ω–∞ —á–∞—Å |

### –§–∏–Ω–∞–Ω—Å–∏ (–ù–û–í–û –≤ v3.5)
| Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|
| `/finance-webhook` | GET —Ñ–∏–Ω–∞–Ω—Å–æ–≤–∏ –∑–∞–ø–∏—Å–∏ |
| `/finance-add` | –î–æ–±–∞–≤–∏ –ø—Ä–∏—Ö–æ–¥/—Ä–∞–∑—Ö–æ–¥ |
| `/nhif-prices` | –ù–ó–û–ö —Ü–µ–Ω–æ—Ä–∞–∑–ø–∏—Å |

### SMS
| Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|
| `/send-sms` | –ò–∑–ø—Ä–∞—â–∞–Ω–µ –Ω–∞ SMS —Å Twilio |

### Telegram
| Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|
| `/telegram-callback` | –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ inline –±—É—Ç–æ–Ω–∏ |

---

## üìÖ –°–ò–°–¢–ï–ú–ê –ó–ê –ß–ê–°–û–í–ï

### –°—Ç–∞—Ç—É—Å–∏ –Ω–∞ —Å—ä–±–∏—Ç–∏—è
| –°—Ç–∞—Ç—É—Å | –ò–∫–æ–Ω–∞ | –¶–≤—è—Ç –≤ Calendar | ColorId |
|--------|-------|-----------------|---------|
| –ß–∞–∫–∞—â (pending) | ‚è≥ | –ñ—ä–ª—Ç | 5 |
| –ü–æ—Ç–≤—ä—Ä–¥–µ–Ω (confirmed) | ‚úÖ | –ó–µ–ª–µ–Ω | 10 |
| –ó–∞ –æ–±–∞–∂–¥–∞–Ω–µ (callback) | üîî | –û—Ä–∞–Ω–∂–µ–≤ | 6 |
| –ó–∞–≤—ä—Ä—à–µ–Ω (completed) | üîµ | –°–∏–Ω | 9 |
| –û—Ç–º–µ–Ω–µ–Ω (cancelled) | üî¥ | –ß–µ—Ä–≤–µ–Ω | 11 |

### –†–∞–±–æ—Ç–Ω–æ –≤—Ä–µ–º–µ
- **–°—É—Ç—Ä–∏–Ω:** 09:00 - 12:00
- **–°–ª–µ–¥–æ–±–µ–¥:** 13:30 - 17:30
- **–ò–Ω—Ç–µ—Ä–≤–∞–ª:** 30 –º–∏–Ω—É—Ç–∏
- **–†–∞–±–æ—Ç–Ω–∏ –¥–Ω–∏:** –ü–æ–Ω–µ–¥–µ–ª–Ω–∏–∫ - –ü–µ—Ç—ä–∫

### –ü—Ä–æ—Ü–µ—Å –Ω–∞ —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏—è
1. –ü–∞—Ü–∏–µ–Ω—Ç –∏–∑–±–∏—Ä–∞ –¥–∞—Ç–∞ –∏ —á–∞—Å –æ—Ç –ø—É–±–ª–∏—á–Ω–∞—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞
2. –í—ä–≤–µ–∂–¥–∞ –∏–º–µ, —Ç–µ–ª–µ—Ñ–æ–Ω, –ø—Ä–∏—á–∏–Ω–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª–Ω–æ)
3. –ü–æ–ª—É—á–∞–≤–∞ confirmation —Å—Ç—Ä–∞–Ω–∏—Ü–∞
4. –î–æ–∫—Ç–æ—Ä–∫–∞—Ç–∞ –ø–æ–ª—É—á–∞–≤–∞ Telegram –∏–∑–≤–µ—Å—Ç–∏–µ —Å –±—É—Ç–æ–Ω–∏ –∑–∞ –ø—Ä–æ–¥—ä–ª–∂–∏—Ç–µ–ª–Ω–æ—Å—Ç
5. –ü—Ä–∏ –æ–¥–æ–±—Ä–µ–Ω–∏–µ ‚Üí SMS –¥–æ –ø–∞—Ü–∏–µ–Ω—Ç–∞
6. –ü—Ä–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç ‚Üí –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –≤ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª–∞
7. –ü—Ä–∏ –∏–∑—Ç–∏—á–∞–Ω–µ (18:00 deadline) ‚Üí SMS –∑–∞ –æ—Ç–∫–∞–∑

---

## üîî SMS –ò–ó–í–ï–°–¢–ò–Ø (Twilio)

### Templates –≤ workflow 17
| Template | –ö–æ–≥–∞ —Å–µ –∏–∑–ø—Ä–∞—â–∞ |
|----------|----------------|
| `booking_received` | –ü—Ä–∏ –ø–æ–¥–∞–≤–∞–Ω–µ –Ω–∞ –∑–∞—è–≤–∫–∞ |
| `booking_confirmed` | –ü—Ä–∏ –ø–æ—Ç–≤—ä—Ä–∂–¥–µ–Ω–∏–µ –æ—Ç –¥–æ–∫—Ç–æ—Ä |
| `booking_rejected` | –ü—Ä–∏ —Ä—ä—á–µ–Ω –æ—Ç–∫–∞–∑ |
| `booking_conflict` | –ü—Ä–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç —Å –¥—Ä—É–≥ —á–∞—Å |
| `booking_expired` | –ü—Ä–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∏–∑—Ç–∏—á–∞–Ω–µ |
| `reminder` | –ù–∞–ø–æ–º–Ω—è–Ω–µ (–¥–µ–Ω –ø—Ä–µ–¥–∏) |

---

## ‚ö†Ô∏è –î–ï–¢–ï–ö–¶–ò–Ø –ù–ê –ö–û–ù–§–õ–ò–ö–¢–ò

### –õ–æ–≥–∏–∫–∞ (–≤ calendar.js)
```javascript
checkForConflicts(date, startTime, endTime, excludeEventId)
```
- –ü—Ä–æ–≤–µ—Ä—è–≤–∞ –≤—Å–∏—á–∫–∏ —Å—ä–±–∏—Ç–∏—è –∑–∞ –¥–∞–¥–µ–Ω–∞ –¥–∞—Ç–∞
- –í–∫–ª—é—á–≤–∞ –ø–æ—Ç–≤—ä—Ä–¥–µ–Ω–∏ –ò —á–∞–∫–∞—â–∏ —Å—ä–±–∏—Ç–∏—è
- –ü–æ–∫–∞–∑–≤–∞ ‚ö†Ô∏è –Ω–∞ –±—É—Ç–æ–Ω–∏—Ç–µ —Å –∫–æ–Ω—Ñ–ª–∏–∫—Ç
- –ü—Ä–∏ –Ω–∞—Ç–∏—Å–∫–∞–Ω–µ ‚Üí dialog –∑–∞ —Ä–∞–∑—Ä–µ—à–∞–≤–∞–Ω–µ

### UI –∏–Ω–¥–∏–∫–∞—Ü–∏—è
- –ö–∞—Ä—Ç–∏—á–∫–∏—Ç–µ —Å –∫–æ–Ω—Ñ–ª–∏–∫—Ç –∏–º–∞—Ç –∂—ä–ª—Ç–∞ —Ä–∞–º–∫–∞
- –ë—É—Ç–æ–Ω–∏—Ç–µ —Å –∫–æ–Ω—Ñ–ª–∏–∫—Ç —Å–∞ –æ—Ä–∞–Ω–∂–µ–≤–∏ –∏ –ø—É–ª—Å–∏—Ä–∞—Ç
- –ü–æ–∫–∞–∑–≤–∞ —Å–µ —Å–ø–∏—Å—ä–∫ –Ω–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∏—Ä–∞—â–∏—Ç–µ —á–∞—Å–æ–≤–µ

---

## ‚è∞ –ê–í–¢–û–ú–ê–¢–ò–ß–ù–û –ò–ó–¢–ò–ß–ê–ù–ï (Workflow 18)

### –ü—Ä–∞–≤–∏–ª–∞
1. **–°—ä—â–∏—è—Ç –¥–µ–Ω:** –ò–∑—Ç–∏—á–∞ –≤ 18:00 –∞–∫–æ –Ω–µ –µ –æ–¥–æ–±—Ä–µ–Ω
2. **–°–ª–µ–¥–≤–∞—â –¥–µ–Ω:** –ò–∑—Ç–∏—á–∞ –≤ 18:00 –Ω–∞ –¥–µ–Ω—è –ø—Ä–µ–¥–∏ —á–∞—Å–∞
3. **–ú–∏–Ω–∞–ª–∏ —á–∞—Å–æ–≤–µ:** –ò–∑—Ç—Ä–∏–≤–∞—Ç —Å–µ –≤–µ–¥–Ω–∞–≥–∞
4. **–ü—Ä–∏ –∏–∑—Ç–∏—á–∞–Ω–µ:** SMS –¥–æ –ø–∞—Ü–∏–µ–Ω—Ç–∞ + Telegram –¥–æ –∞–¥–º–∏–Ω

### –ò–∑–ø—ä–ª–Ω–µ–Ω–∏–µ
- Scheduled: –í—Å–µ–∫–∏ —á–∞—Å
- Timezone: Europe/Sofia

---

## üñ•Ô∏è ADMIN –ü–ê–ù–ï–õ –§–£–ù–ö–¶–ò–û–ù–ê–õ–ù–û–°–¢–ò

### –ö–∞–ª–µ–Ω–¥–∞—Ä (/admin/calendar)
- [x] –°–µ–¥–º–∏—á–µ–Ω –∏–∑–≥–ª–µ–¥
- [x] –î–Ω–µ–≤–µ–Ω –∏–∑–≥–ª–µ–¥
- [x] –°—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ –Ω–æ–≤ —á–∞—Å
- [x] –†–µ–¥–∞–∫—Ç–∏—Ä–∞–Ω–µ –Ω–∞ —Å—ä—â–µ—Å—Ç–≤—É–≤–∞—â
- [x] Drag & drop –ø—Ä–µ–º–µ—Å—Ç–≤–∞–Ω–µ
- [x] –¶–≤–µ—Ç–æ–≤–æ –∫–æ–¥–∏—Ä–∞–Ω–µ –ø–æ —Å—Ç–∞—Ç—É—Å
- [x] **–°–µ–∫—Ü–∏—è "–ß–∞–∫–∞—â–∏ –∑–∞—è–≤–∫–∏"** —Å –±—ä—Ä–∑–∏ –±—É—Ç–æ–Ω–∏ 30–º/60–º
- [x] –î–µ—Ç–µ–∫—Ü–∏—è –∏ –ø–æ–∫–∞–∑–≤–∞–Ω–µ –Ω–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∏

### Dashboard (/admin/dashboard)
- [x] –§–∏–Ω–∞–Ω—Å–æ–≤–∞ —Å–ø—Ä–∞–≤–∫–∞ —Å –ø–µ—Ä–∏–æ–¥ (–¥–Ω–µ—Å/—Å–µ–¥–º–∏—Ü–∞/–º–µ—Å–µ—Ü/custom)
- [x] –ü—Ä–∏—Ö–æ–¥–∏ –∏ —Ä–∞–∑—Ö–æ–¥–∏ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- [x] –ë–∞–ª–∞–Ω—Å –≤ EUR
- [x] –ë—Ä–æ–π —É–Ω–∏–∫–∞–ª–Ω–∏ –ø–∞—Ü–∏–µ–Ω—Ç–∏
- [x] –ü–æ—Å–ª–µ–¥–Ω–∏ –∑–∞–ø–∏—Å–∏ —Ç–∞–±–ª–∏—Ü–∞

### –§–∏–Ω–∞–Ω—Å–∏ (/admin/workday)
- [x] –ü–∞—Ü–∏–µ–Ω—Ç–∏ –æ—Ç Google Calendar
- [x] –ë—É—Ç–æ–Ω "–ü—Ä–∏—Ö–æ–¥" —Å –ù–ó–û–ö —É—Å–ª—É–≥–∏ (–º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω –∏–∑–±–æ—Ä —Å checkboxes)
- [x] –ë—É—Ç–æ–Ω "–†–∞–∑—Ö–æ–¥" —Å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- [x] Cash/Bank toggle –∑–∞ –ø–ª–∞—â–∞–Ω–∏—è (—Å —è—Å–Ω–∏ –∞–∫—Ç–∏–≤–Ω–∏ —Å—ä—Å—Ç–æ—è–Ω–∏—è)
- [x] –í—ä–∑—Ä–∞—Å—Ç–æ–≤–∞ –≥—Ä—É–ø–∞ toggle (–ü–æ–¥ 18 / –ù–∞–¥ 18)
- [x] –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∏–∑—á–∏—Å–ª–µ–Ω–∏–µ –Ω–∞ —Ü–µ–Ω–∞ –ø–æ –≤—ä–∑—Ä–∞—Å—Ç
- [x] –î–Ω–µ–≤–Ω–∞ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–∞ —Å–ø—Ä–∞–≤–∫–∞
- [x] –í—Å–∏—á–∫–∏ —Ü–µ–Ω–∏ –≤ EUR
- [x] –ö–æ–º–ø–∞–∫—Ç–µ–Ω UI —Å inline —Å—Ç–∏–ª–æ–≤–µ

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ (/admin/settings)
- [x] –†–∞–±–æ—Ç–Ω–æ –≤—Ä–µ–º–µ
- [x] Twilio –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- [ ] –°–ø–µ—Ü–∏–∞–ª–Ω–∏ –¥–∞—Ç–∏ (TODO)

---

## üì± TELEGRAM –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø

### Workflow 16 (Public Booking)
–ü—Ä–∏ –Ω–æ–≤–∞ –∑–∞—è–≤–∫–∞ –∏–∑–ø—Ä–∞—â–∞:
```
ü¶∑ –ù–æ–≤–∞ –∑–∞—è–≤–∫–∞ –∑–∞ —á–∞—Å

üë§ –ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤
üì± 0888123456
üìÖ 27.01.2026 –≤ 10:30
üìã –ü—Ä–µ–≥–ª–µ–¥
üïê –°–≤–æ–±–æ–¥–Ω–æ –≤—Ä–µ–º–µ: 60 –º–∏–Ω

[30 –º–∏–Ω] [60 –º–∏–Ω]
[üìû –ó–∞ –æ–±–∞–∂–¥–∞–Ω–µ] [‚ùå –û—Ç–∫–∞–∂–∏]
```

**–ë—É—Ç–æ–Ω–∏—Ç–µ —Å–∞ –¥–∏–Ω–∞–º–∏—á–Ω–∏** - –ø–æ–∫–∞–∑–≤–∞—Ç —Å–µ —Å–∞–º–æ –æ–ø—Ü–∏–∏ –∫–æ–∏—Ç–æ —Å–µ —Å—ä–±–∏—Ä–∞—Ç –≤ —Å–≤–æ–±–æ–¥–Ω–æ—Ç–æ –≤—Ä–µ–º–µ.

### Workflow 10 (Telegram Callback) ‚úÖ –†–ê–ë–û–¢–ò
–û–±—Ä–∞–±–æ—Ç–≤–∞ callback –æ—Ç –±—É—Ç–æ–Ω–∏—Ç–µ:
- `confirm_30_EVENT_ID` ‚Üí –ü–æ—Ç–≤—ä—Ä–∂–¥–∞–≤–∞ —Å 30 –º–∏–Ω, –æ–±–Ω–æ–≤—è–≤–∞ –∫–∞–ª–µ–Ω–¥–∞—Ä–∞
- `confirm_60_EVENT_ID` ‚Üí –ü–æ—Ç–≤—ä—Ä–∂–¥–∞–≤–∞ —Å 60 –º–∏–Ω, –æ–±–Ω–æ–≤—è–≤–∞ –∫–∞–ª–µ–Ω–¥–∞—Ä–∞
- `callback_EVENT_ID` ‚Üí –ú–∞—Ä–∫–∏—Ä–∞ –∑–∞ –æ–±–∞–∂–¥–∞–Ω–µ (üîî –æ—Ä–∞–Ω–∂–µ–≤ —Ü–≤—è—Ç)
- `cancel_EVENT_ID` ‚Üí –ò–∑—Ç—Ä–∏–≤–∞ —á–∞—Å–∞ –æ—Ç –∫–∞–ª–µ–Ω–¥–∞—Ä–∞

**Event ID —Ñ–æ—Ä–º–∞—Ç:** Google Calendar ID (–Ω–∞–ø—Ä. `76qpm9l2u4cuel0o4kpuaj6r8`)

### Telegram Bot
- **–ò–º–µ:** Ro–¥–æ–ø–∏–î–µ–Ω—ÇBot
- **Admin Chat ID:** 2146283697
- **Webhook URL:** –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–∞–Ω –≤ n8n

---

## üîß –ò–ó–í–ï–°–¢–ù–ò –ü–†–û–ë–õ–ï–ú–ò / TODO

### –†–µ—à–µ–Ω–∏ —Ç–∞–∑–∏ —Å–µ—Å–∏—è (28.01.2026) ‚úÖ
- [x] –ù–ó–û–ö —É—Å–ª—É–≥–∏ - –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω –∏–∑–±–æ—Ä —Å checkboxes (–≤–º–µ—Å—Ç–æ dropdown)
- [x] –¶–µ–Ω–∏ –ø–æ –≤—ä–∑—Ä–∞—Å—Ç - patientPayUnder18 / patientPayOver18
- [x] loadWorkdayAppointments - –ø–∞—Ä–∞–º–µ—Ç—ä—Ä 'date' –≤–º–µ—Å—Ç–æ 'startDate/endDate'
- [x] UI –ø–æ–¥–æ–±—Ä–µ–Ω–∏—è - —è—Å–Ω–∏ –∞–∫—Ç–∏–≤–Ω–∏ —Å—ä—Å—Ç–æ—è–Ω–∏—è –Ω–∞ –±—É—Ç–æ–Ω–∏—Ç–µ
- [x] –ö–æ–º–ø–∞–∫—Ç–µ–Ω —Å–ø–∏—Å—ä–∫ —Å —É—Å–ª—É–≥–∏ - –ø–æ-–º–∞–ª–∫–æ padding, –ø–æ-–º–∞–ª–∫–∏ —à—Ä–∏—Ñ—Ç–æ–≤–µ
- [x] Inline —Å—Ç–∏–ª–æ–≤–µ –≤ JS –∑–∞ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–∞–Ω–æ –æ–±–Ω–æ–≤—è–≤–∞–Ω–µ (–∑–∞–æ–±–∏–∫–∞–ª—è –∫–µ—à–∞)
- [x] Service Worker –≤–µ—Ä—Å–∏—è –æ–±–Ω–æ–≤–µ–Ω–∞ –Ω–∞ v3.7

### –†–µ—à–µ–Ω–∏ –ø—Ä–µ–¥–∏—à–Ω–∞ —Å–µ—Å–∏—è (27.01.2026) ‚úÖ
- [x] Telegram callback –±—É—Ç–æ–Ω–∏ —Ä–∞–±–æ—Ç—è—Ç
- [x] –î–∏–Ω–∞–º–∏—á–Ω–∏ –±—É—Ç–æ–Ω–∏ –≤ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª–∞ (30–º/60–º –±–∞–∑–∏—Ä–∞–Ω–∏ –Ω–∞ —Å–≤–æ–±–æ–¥–Ω–æ –≤—Ä–µ–º–µ)
- [x] maxAvailableMinutes –∏–∑—á–∏—Å–ª–µ–Ω–∏–µ –ø–æ–ø—Ä–∞–≤–µ–Ω–æ
- [x] Timezone parsing –≤ workflow 16
- [x] Get Calendar Event –∏–∑–ø–æ–ª–∑–≤–∞ –¥–∏—Ä–µ–∫—Ç–µ–Ω ID lookup

### ‚ö†Ô∏è –ò–ó–ò–°–ö–í–ê –î–ï–ô–°–¢–í–ò–ï –û–¢ –ü–û–¢–†–ï–ë–ò–¢–ï–õ–Ø
1. **n8n Workflow 06b** - –†–µ-–∏–º–ø–æ—Ä—Ç–∏—Ä–∞–π —Ñ–∞–π–ª–∞ `06b-finance-add.json` (–∏–º–∞ —Å—Ç–∞—Ä–∞—Ç–∞ –∫–æ–ª–æ–Ω–∞ `appointmentId` –≤–º–µ—Å—Ç–æ `eventId`)
2. **Google Sheets** - –ò–∑–ø—ä–ª–Ω–∏ `importNHIFPrices()` –≤ Apps Script –∞–∫–æ –ª–∏—Å—Ç–∞ NHIF_Prices –Ω–µ —Å—ä—â–µ—Å—Ç–≤—É–≤–∞
3. **–ë—Ä–∞—É–∑—ä—Ä –∫–µ—à** - –ò–∑—á–∏—Å—Ç–∏ Service Worker: F12 ‚Üí Application ‚Üí Clear Storage ‚Üí Clear site data

### –ë—ä–¥–µ—â–∏ –ø–æ–¥–æ–±—Ä–µ–Ω–∏—è
- [ ] **–ö–∞–Ω–∞–ª–∏ –∑–∞ –∏–∑–≤–µ—Å—Ç–∏—è** - Telegram/WhatsApp –ø—Ä–µ–¥–∏ SMS –∑–∞ –ø–µ—Å—Ç–µ–Ω–µ –Ω–∞ —Ä–∞–∑—Ö–æ–¥–∏
- [ ] SMS –Ω–∞–ø–æ–º–Ω—è–Ω–µ –¥–µ–Ω –ø—Ä–µ–¥–∏ —á–∞—Å–∞
- [ ] –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤ Dashboard
- [ ] –ï–∫—Å–ø–æ—Ä—Ç –Ω–∞ —Ñ–∏–Ω–∞–Ω—Å–∏ –∫—ä–º CSV
- [ ] –°–ø–µ—Ü–∏–∞–ª–Ω–∏ –¥–∞—Ç–∏ (–ø–æ—á–∏–≤–Ω–∏ –¥–Ω–∏)
- [ ] –ü—ä–ª–Ω–∞ PWA offline –ø–æ–¥–¥—Ä—ä–∂–∫–∞

---

## üìú –ò–°–¢–û–†–ò–Ø –ù–ê –ü–†–û–ú–ï–ù–ò–¢–ï

### 28.01.2026 - v3.7
1. **–ù–ó–û–ö –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω –∏–∑–±–æ—Ä** - Checkboxes –≤–º–µ—Å—Ç–æ dropdown –∑–∞ —É—Å–ª—É–≥–∏
2. **–¶–µ–Ω–∏ –ø–æ –≤—ä–∑—Ä–∞—Å—Ç** - –ü—Ä–∞–≤–∏–ª–Ω–æ —á–µ—Ç–µ–Ω–µ –Ω–∞ patientPayUnder18/Over18
3. **UI Redesign** - –Ø—Å–Ω–∏ –∞–∫—Ç–∏–≤–Ω–∏ —Å—ä—Å—Ç–æ—è–Ω–∏—è –Ω–∞ –±—É—Ç–æ–Ω–∏ (—Å–∏–Ω/–∑–µ–ª–µ–Ω —Ñ–æ–Ω)
4. **–ö–æ–º–ø–∞–∫—Ç–µ–Ω —Å–ø–∏—Å—ä–∫** - –ü–æ-–º–∞–ª–∫–æ padding, sticky category headers
5. **Inline —Å—Ç–∏–ª–æ–≤–µ** - –î–∏—Ä–µ–∫—Ç–Ω–æ –≤ JS –∑–∞ –∑–∞–æ–±–∏–∫–∞–ª—è–Ω–µ –Ω–∞ CSS –∫–µ—à–∞
6. **loadWorkdayAppointments Fix** - 'date' –ø–∞—Ä–∞–º–µ—Ç—ä—Ä –≤–º–µ—Å—Ç–æ 'startDate/endDate'
7. **Service Worker v3.7** - –û–±–Ω–æ–≤–µ–Ω–∞ –≤–µ—Ä—Å–∏—è –∑–∞ –∏–∑—á–∏—Å—Ç–≤–∞–Ω–µ –Ω–∞ –∫–µ—à–∞

### 27.01.2026 - v3.5
1. **–§–∏–Ω–∞–Ω—Å–æ–≤ –º–æ–¥—É–ª** - Dashboard —Å –ø—Ä–∏—Ö–æ–¥–∏/—Ä–∞–∑—Ö–æ–¥–∏ –≤ EUR
2. **–ù–ó–û–ö —Ü–µ–Ω–æ—Ä–∞–∑–ø–∏—Å** - Google Sheets + API endpoint
3. **Workflow 16 Fix** - –ü–æ–ø—Ä–∞–≤–µ–Ω timezone parsing –∑–∞ maxAvailableMinutes
4. **Workflow 10 Fix** - Telegram callback –±—É—Ç–æ–Ω–∏ —Ä–∞–±–æ—Ç—è—Ç
5. **Admin Panel Fix** - –î–∏–Ω–∞–º–∏—á–Ω–∏ –±—É—Ç–æ–Ω–∏ –∑–∞ –ø—Ä–æ–¥—ä–ª–∂–∏—Ç–µ–ª–Ω–æ—Å—Ç

### 27.01.2026 (—Å—É—Ç—Ä–∏–Ω)
1. **Confirmation —Å—Ç—Ä–∞–Ω–∏—Ü–∞** - –∫—Ä–∞—Å–∏–≤–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–ª–µ–¥ —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏—è
2. **–î–µ—Ç–µ–∫—Ü–∏—è –Ω–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∏** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –æ–¥–æ–±—Ä–µ–Ω–∏–µ
3. **SMS –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - Twilio templates –∑–∞ –≤—Å–∏—á–∫–∏ —Å—Ü–µ–Ω–∞—Ä–∏–∏
4. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∏–∑—Ç–∏—á–∞–Ω–µ** - Workflow 18 —Å 18:00 deadline

---

## üîë CREDENTIALS (–¥–∞ —Å–µ –ø–æ–ø—ä–ª–Ω—è—Ç –≤ n8n)

```
Google Calendar OAuth2:
- Client ID: (–æ—Ç Google Cloud Console)
- Client Secret: (–æ—Ç Google Cloud Console)
- Calendar ID: rodopi.dent@gmail.com

Twilio:
- Account SID: (–æ—Ç Twilio Console)
- Auth Token: (–æ—Ç Twilio Console)
- From Number: (Twilio phone number)

Telegram:
- Bot Token: (–æ—Ç @BotFather)
- Admin Chat ID: (–æ—Ç @userinfobot)
```

---

## üìû –ö–û–ù–¢–ê–ö–¢–ò –ó–ê –ü–û–î–î–†–™–ñ–ö–ê

- **GitHub Repo:** https://github.com/Georgi-Piskov/RODOPI-DENT
- **n8n Instance:** https://n8n.simeontsvetanovn8nworkflows.site

